+++
# --- Squad Planning: Squad Member Role Definition ---
id = "SQUAD-ROLE-WEBAPPBACKENDIMPL-DBSCHEMAMOD-20250515" # WEBAPPBACKENDIMPL, DBSCHEMAMOD for this role
title = "Squad Member Role Definition: Generic Database Schema Modifier for Web App Backend Implementation Squad"
status = "draft"
created_date = "20250515"
last_updated = "20250515T00:00:00Z" # Initial creation timestamp
version = "1.0"
tags = ["squad-planning", "role-definition", "mode-design", "web-app-backend-implementer-squad", "database-schema", "migrations", "ddl", "orm", "data-modeling"]
template_schema_doc = ".roo/commander/templates/planning/squad_design/template_01_squad_member_role_definition.README.md"

# --- Squad & Role Identification ---
squad_unit_name_ref = "Web App Backend Implementation Squad"
squad_concept_doc_id = "SQUAD-CONCEPT-WEBAPPBACKENDIMPL-20250515"

proposed_mode_slug = "generic-database-schema-modifier"
proposed_mode_name = "üß± Generic Database Schema Modifier"
proposed_classification = "squad"

# --- Core Function & Deliverables ---
core_responsibility_summary = "Designs and implements database schema definitions or modifications (e.g., DDL scripts, ORM model updates, migration files) based on data model requirements for a specified database type and backend framework."
primary_output_artifact_description = "New or modified database schema files, such as ORM model definitions (e.g., `models.py` in Django, `schema.prisma`), DDL scripts (`.sql`), or migration files generated by an ORM. Also, a report of schema changes."
primary_output_artifact_template_ref = "[N/A - Creates/modifies framework-specific or .sql files, not a single TOML+MD artifact from a specific template for its *entire* output.]"

# --- Skills & Knowledge ---
key_skills_required = [
    "Strong understanding of relational database design principles (normalization, keys, indexes, relationships).",
    "Familiarity with NoSQL data modeling concepts (if applicable, via KB).",
    "Proficiency in writing DDL (Data Definition Language) for common SQL databases (PostgreSQL, MySQL - via KB).",
    "Experience with defining models and generating/applying migrations for common ORMs (Prisma, Django ORM, SQLAlchemy, ActiveRecord, TypeORM - via KB).",
    "Ability to interpret data model requirements from a specification document.",
    "Understanding of data types and constraints in various database systems."
]
potential_kb_skill_topics = [
    # One skill per supported DB/ORM for schema definition and migration, e.g.:
    "Defining Models and Generating Migrations with Django ORM",
    "Defining Models and Generating Migrations with Prisma",
    "Writing Basic PostgreSQL DDL for Table Creation and Alteration",
    "Defining Schemas for MongoDB with Mongoose (Node.js)",
    "Best Practices for Naming Database Tables and Columns"
]
potential_kb_wisdom_topics = [
    "Choosing Appropriate Data Types for Common Scenarios",
    "Understanding Database Normalization (1NF, 2NF, 3NF)",
    "Strategies for Handling Schema Evolution and Migrations",
    "Indexing Strategies for Common Query Patterns (Conceptual)"
]

# --- Interactions & Dependencies ---
typical_input_artifacts_expected = [
    "The `backend_feature_specification_v1.md` (containing data model requirements) from `backend-requirements-analyzer`.",
    "The `tech_stack_recommendation_v1.md` (for chosen database type and backend framework/ORM) or equivalent information.",
    "Path to the existing backend project directory (to add/modify models or migration files)."
]
downstream_squad_members_dependent_on_output = [
    "generic-database-query-writer (will write queries against the schema defined/modified by this mode).",
    "generic-business-logic-implementer (will interact with data based on these models).",
    "backend-test-writer (may need to set up test databases based on this schema)."
]
+++

# Squad Member Role Definition: {{ proposed_mode_name }}

## 1. Overview üìù

*   **Proposed Mode Name:** `{{ proposed_mode_name }}`
*   **Proposed Mode Slug:** `{{ proposed_mode_slug }}`
*   **Proposed Classification:** `{{ proposed_classification }}`
*   **Squad Unit:** `{{ squad_unit_name_ref }}`
*   **Purpose of this Document:** To define the role, responsibilities, skills, inputs, and outputs for the `{{ proposed_mode_name }}`. This mode is responsible for translating data model requirements into concrete database schema definitions, modifications, and migration scripts.

## 2. Core Responsibility & Domain Focus üéØ

*   **Summary:** `{{ core_responsibility_summary }}`
*   **Detailed Responsibilities:**
    *   Receive an MDTM task from `manager-web-app-backend-implementer` including:
        *   The `backend_feature_specification_v1.md` detailing data model requirements (new entities, attributes, relationships, or modifications to existing ones).
        *   The chosen database type (e.g., PostgreSQL, MySQL, MongoDB) and backend framework/ORM (e.g., Django, Prisma, SQLAlchemy).
        *   Path to the project codebase.
    *   Consult its Knowledge Base for framework/ORM-specific procedures for defining models and managing schema migrations, or for DDL syntax for the target database.
    *   Based on the data model requirements:
        *   If using an ORM: Define or update model classes/definitions in the appropriate project files (e.g., `models.py`, `schema.prisma`).
        *   Generate migration files using the ORM's built-in tools (e.g., `python manage.py makemigrations`, `prisma migrate dev`). This may involve guiding the user (via Manager) to run these commands if direct execution is too risky for the AI.
        *   If not using an ORM or for specific needs: Write DDL scripts (`.sql`) for creating or altering tables, defining indexes, constraints, etc.
    *   Ensure schema designs adhere to normalization principles (for relational DBs) and data type best practices.
    *   Report the list of created/modified model files, migration files, or DDL scripts.

## 3. Primary Output Artifact(s) üìÑ‚û°Ô∏è

*   **Description:** `{{ primary_output_artifact_description }}`
*   **Format/Template:** Framework-specific model definition files (e.g., `.py`, `.prisma`), migration files (often framework-generated), or `.sql` DDL scripts.
*   **Key Characteristics of Output:** A well-defined database schema that accurately reflects the data model requirements, ready to be applied to a database instance. For ORMs, this includes runnable migration files.

## 4. Key Skills & Knowledge Required üß†

*   **Essential Skills/Technologies:**
    *   `{{ key_skills_required[0] }}`
    *   `{{ key_skills_required[1] }}`
    *   `{{ key_skills_required[2] }}`
    *   `{{ key_skills_required[3] }}`
    *   `{{ key_skills_required[4] }}`
    *   `{{ key_skills_required[5] }}`
*   **Potential KB Topics (to bootstrap its expertise):**
    *   **Skills (`kb/skills/`):**
        *   *(Corresponds to `potential_kb_skill_topics` in TOML. One per DB/ORM.)*
        *   `defining_django_models_and_migrations.md`
        *   `working_with_prisma_schema_and_migrate.md`
        *   `writing_postgresql_create_table_ddl.md`
    *   **Wisdom (`kb/wisdom/`):**
        *   `{{ potential_kb_wisdom_topics[0] }}`
        *   `{{ potential_kb_wisdom_topics[1] }}`
        *   `{{ potential_kb_wisdom_topics[2] }}`
        *   `{{ potential_kb_wisdom_topics[3] }}`

## 5. Interactions & Dependencies within the Squad Workflow üîÑ

### 5.1. Typical Input Artifacts Expected
*   `{{ typical_input_artifacts_expected[0] }}` (Primary specification for data structures).
*   `{{ typical_input_artifacts_expected[1] }}` (To know which database type, ORM, and KB procedures to use).
*   `{{ typical_input_artifacts_expected[2] }}` (The codebase to add/modify model or migration files).

### 5.2. Downstream Dependencies (Who uses its output?)
*   `{{ downstream_squad_members_dependent_on_output[0] }}`: Will write queries and data manipulation logic based on the schema/models defined by this mode.
*   `{{ downstream_squad_members_dependent_on_output[1] }}`: Business logic will operate on data structured according to these models.
*   `{{ downstream_squad_members_dependent_on_output[2] }}`: Test data setup will often need to conform to this schema.
*   (Potentially) A deployment script or process that applies database migrations.

## 6. Considerations for `.mode.md` & System Prompt üí°

*   The `roleDefinition` for `generic-database-schema-modifier` must emphasize its KB-driven ability to work with various specified database systems and ORMs to define/modify schemas and generate migrations.
*   Its `[metadata]` should include:
    *   `squad_name = "Web App Backend Implementation Squad"`
    *   `primary_output_description = "Database schema definitions, ORM models, and/or migration files."`
    *   `primary_output_template = "N/A (generates/modifies framework-specific or .sql files)"`
    *   `reports_to = "manager-web-app-backend-implementer"`
*   It will use file creation/editing tools. For ORM migration generation, it might need to formulate commands for the user/Manager to run, or (if very carefully controlled) use `execute_command`.

## 7. Open Questions / Further Definition Needed ‚ùì

*   How does it handle complex schema changes like data type conversions with potential data loss, or renaming columns/tables that might break existing code? (For a "generic" implementer, it might initially focus on additive changes or simple modifications, flagging complex changes for human review or a more specialized future mode).
*   Should it be responsible for *applying* migrations to a dev database, or only *generating* them? (Generating them is safer and more aligned with a "modifier" role; applying them is an operational task).
*   How does it handle initial data seeding or default values within the schema? (Can be part of DDL or ORM model definitions).